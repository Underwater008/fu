<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Á¶è ‚Äî Fortune Gacha</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Liu+Jian+Mao+Cao&family=Ma+Shan+Zheng&family=Zhi+Mang+Xing&text=%E7%A6%8F%E7%A6%84%E5%AF%BF%E5%96%9C%E8%B4%A2%E5%AF%8C%E8%B4%B5%E5%8F%91%E9%87%91%E7%8E%89%E5%AE%9D%E4%BD%99%E4%B8%B0%E7%9B%9B%E5%88%A9%E6%97%BA%E9%9A%86%E6%98%8C%E5%85%B4%E8%BF%9B%E5%AE%89%E5%BA%B7%E5%AE%81%E6%B3%B0%E5%92%8C%E5%B9%B3%E9%A1%BA%E5%81%A5%E4%B9%90%E6%AC%A2%E5%BA%86%E7%A6%A7%E7%A5%BA%E5%98%89%E6%98%A5%E5%BE%B7%E5%96%84%E4%BB%81%E4%B9%89%E5%BF%A0%E4%BF%A1%E5%AD%9D%E6%85%A7%E6%81%A9%E7%88%B1%E5%90%88%E5%9C%86%E6%BB%A1%E7%BE%8E%E9%A6%A8%E9%9B%85%E5%90%89%E7%A5%A5%E7%91%9E%E5%A6%82%E6%84%8F%E7%A5%9D%E8%BF%90%E9%BE%99%E5%87%A4%E9%BA%9F%E9%B9%A4%E5%8D%8E%E6%88%90%E5%8D%87%E7%99%BB%E9%AB%98%C2%B7%E4%B8%80%E4%BA%BA%E5%8D%81%E5%A4%A7&display=swap">
    <link rel="stylesheet" href="https://unpkg.com/@chinese-fonts/cezkzdbs@3.0.0/dist/%E4%BB%93%E8%80%B3%E5%91%A8%E7%8F%82%E6%AD%A3%E5%A4%A7%E6%A6%9C%E4%B9%A6/result.css">
    <link rel="stylesheet" href="https://unpkg.com/@chinese-fonts/hlxsjt@3.0.0/dist/%E9%B8%BF%E9%9B%B7%E8%A1%8C%E4%B9%A6%E7%AE%80%E4%BD%93/result.css">
    <link rel="stylesheet" href="https://unpkg.com/@chinese-fonts/qtbfsxt@3.0.0/dist/%E5%8D%83%E5%9B%BE%E7%AC%94%E9%94%8B%E6%89%8B%E5%86%99%E4%BD%93/result.css">
    <link rel="stylesheet" href="https://unpkg.com/@chinese-fonts/ysbzt@3.0.0/dist/%E5%B3%84%E5%B1%B1%E7%A2%91%E7%AF%86%E4%BD%93/result.css">
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <canvas id="c"></canvas>

    <!-- Auth bar -->
    <div id="auth-bar" class="auth-bar">
        <div id="auth-logged-out" class="auth-section">
            <button id="btn-login" class="btn-auth">Sign In</button>
        </div>
        <div id="auth-logged-in" class="auth-section" style="display:none">
            <span id="auth-email" class="auth-email"></span>
            <span id="draw-counter" class="draw-counter">üé´ √ó10</span>
            <button id="btn-logout" class="btn-auth btn-small">Logout</button>
        </div>
    </div>

    <!-- Login modal -->
    <div id="login-modal" class="modal-overlay" style="display:none">
        <div class="modal-card">
            <h2>Sign In</h2>
            <p>Enter your email to receive a magic link</p>
            <input type="email" id="login-email" placeholder="your@email.com" class="input-email" />
            <button id="btn-send-link" class="btn-action btn-primary">Send Magic Link</button>
            <button id="btn-close-login" class="btn-action btn-secondary">Cancel</button>
            <p id="login-status" class="login-status"></p>
        </div>
    </div>

    <!-- Rewards panel (slide-up drawer) -->
    <div id="rewards-panel" class="rewards-panel" style="display:none">
        <div class="rewards-header">
            <h2>Get More Draws</h2>
            <button id="btn-close-rewards" class="btn-close">‚úï</button>
        </div>
        <div class="rewards-content">
            <div class="reward-section">
                <h3>Daily Login</h3>
                <div id="login-streak" class="streak-dots"></div>
            </div>
            <div class="reward-section">
                <button id="btn-share-draw" class="btn-reward">Share ‚Üí 10 Draws</button>
                <span id="share-cooldown" class="cooldown-text"></span>
            </div>
            <div class="reward-section">
                <button id="btn-watch-ad" class="btn-reward">Watch Ad ‚Üí 1 Draw</button>
                <span id="ad-count" class="cooldown-text"></span>
            </div>
            <div class="reward-section">
                <h3>Invite Friends</h3>
                <p class="reward-desc">1st friend: 30 draws | Each after: 10 draws</p>
                <button id="btn-copy-referral" class="btn-reward">Copy Invite Link</button>
            </div>
            <div class="reward-section">
                <h3>Buy Draws</h3>
                <div id="purchase-bundles" class="purchase-grid"></div>
            </div>
        </div>
    </div>

    <!-- Bottom Controls -->
    <div class="bottom-controls">
        <button id="btn-collection" class="collection-fab">COLLECTION</button>
        
        <div id="mode-switch" class="mode-switch">
            <div class="switch-track"></div>
            <div class="switch-option active" data-mode="single">√ó1</div>
            <div class="switch-option" data-mode="multi">√ó10</div>
        </div>
    </div>

    <!-- Multi-pull results overlay (legacy, hidden) -->
    <div id="multi-overlay">
        <div class="multi-title">ÂçÅËøûÁªìÊûú</div>
        <div id="multi-grid" class="multi-grid"></div>
    </div>

    <!-- Single fortune share button (floating) -->
    <div id="single-fortune-actions" class="single-fortune-actions" style="display:none">
        <button class="btn-action btn-share-result" id="btn-share-single">SHARE</button>
    </div>

    <!-- Multi-fortune floating action buttons -->
    <div class="multi-fortune-actions" id="multi-fortune-actions">
        <button class="btn-action btn-primary" id="btn-reveal-all" style="display:none">REVEAL ALL</button>
        <button class="btn-action btn-share-result" id="btn-share-multi" style="display:none">SHARE</button>
        <button class="btn-action btn-primary" id="btn-multi-again" style="display:none">DRAW x10</button>
        <button class="btn-action btn-secondary" id="btn-multi-single" style="display:none">SINGLE (x1)</button>
        <button class="btn-action btn-secondary" id="btn-multi-collection" style="display:none">COLLECTION</button>
    </div>

    <!-- Multi-pull detail popup -->
    <div id="multi-detail">
        <div class="detail-card" id="detail-card">
            <div class="detail-tier" id="detail-tier"></div>
            <div class="detail-stars" id="detail-stars"></div>
            <div class="detail-category" id="detail-category"></div>
            <div class="detail-character" id="detail-character"></div>
            <div class="detail-divider"></div>
            <div class="detail-phrase" id="detail-phrase"></div>
            <div class="detail-english" id="detail-english"></div>
            <div class="detail-actions">
                <button class="btn-detail-action" id="btn-detail-share">Share</button>
                <button class="btn-detail-action btn-detail-gift" id="btn-detail-gift" style="display:none">Gift</button>
            </div>
        </div>
    </div>

    <!-- Collection panel -->
    <div id="collection-panel">
        <div class="collection-header">
            <h1>COLLECTION</h1>
            <h2>ÂõæÈâ¥</h2>
            <div id="collection-progress" class="collection-progress"></div>
        </div>
        <div id="collection-grid" class="collection-grid"></div>
        <div class="collection-actions">
            <button class="btn-action" id="btn-draw-from-collection">DRAW AGAIN</button>
            <button class="btn-action btn-secondary" id="btn-close-collection">CLOSE</button>
        </div>
    </div>

    <script type="module" src="./main.js"></script>
</body>
</html>
